<!DOCTYPE html>
<html>
<title>Eh don't CB lah!</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<style>
html,body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
</style>
<body class="w3-light-grey">
 
<!-- Top container -->
<div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
  <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();"><i class="fa fa-wrench"></i>  About</button>
  <span class="w3-bar-item w3-right">Eh don't CB lah!</span>
</div>

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
  <div class="w3-container w3-row">

    <div class="w3-col s8 w3-bar">
      <span><strong>Eh don't CB* lah! models how fast Singapore would run out of ICU space based on some simple assumptions.</strong></span><br><br>
      *CB = Circuit Breaker<br><br>
      <a href="#" class="show_hide" data-content="toggle-text">Read More</a>
      <div class="content">
      <br>With the <a href="https://www.gov.sg/article/as-of-20-july-2021-return-to-phase-2-heightened-alert-measures" target="_blank">return to Phase 2 (Heightened Alert)</a> many Singaporeans have been vocal about this decision and that it is not in the spirit of <a href="https://www.youtube.com/watch?v=ewAQ4L3kZ0I" target="_blank">living with COVID-19</a>.
      <br><br>
      Given the main concern is <a href="https://www.youtube.com/watch?v=hHVMhk5tfCk" target="_blank">overwhelming our healthcare system</a>, I created this project as a quick way to estimate how fast we would be overrun and if tightening measures are warranted.<br><br>
      
      Created by: <a href ="https://www.linkedin.com/in/stuart-ong/" target="_blank">Stuart Ong</a><br>
      <a href = "mailto: ongstuart@gmail.com">(Contact Me)</a></div>

    </div>
  </div>
  <hr>
  <div class="w3-container">
    <h5><i class="fa fa-wrench"></i> Key Assumptions</h5>
    <div class="w3-bar-item w3-padding">Change the assumptions then click "Update Projections" to see the effect</div>
    
  </div>
  <form method="POST" action="">
  <div class="w3-bar-block">
       <div class="w3-bar-item w3-padding"><strong>COVID-19 Virality</strong></div>
       <div class="w3-bar-item w3-padding"><i class="fa fa-angle-double-up"></i>  R0: <input type="number" step="0.1" min=0 max=10 name="r0" value='6'></div>
       <div class="w3-bar-item w3-padding"><i class="fa fa-calendar"></i>  Serial Interval: <input type="number" step="0.1" min=1 max=10 name="si" value='5.4'></div>
       <div class="w3-bar-item w3-padding"><strong>Vaxx Rates by Age Group</strong></div>
       <div class="w3-bar-item w3-padding"><i class="fa fa-users"></i>  < 12: <input type="range" min=0 max=100 value={{def_c1_vax}} class="slider" step="1" name="cat_1_vax" onchange="showValue(this)" /><span id="range">{{def_c1_vax}}%</span></div>
       <div class="w3-bar-item w3-padding"><i class="fa fa-users"></i>  12 - 39: <input type="range" min=0 max=100 value={{def_c2_vax}} class="slider" step="1" name="cat_2_vax" onchange="showValue(this)" /><span id="range">{{def_c2_vax}}%</span></div>
       <div class="w3-bar-item w3-padding"><i class="fa fa-users"></i>  40 - 44: <input type="range" min=0 max=100 value={{def_c3_vax}} class="slider" step="1" name="cat_3_vax" onchange="showValue(this)" /><span id="range">{{def_c3_vax}}%</span></div>
       <div class="w3-bar-item w3-padding"><i class="fa fa-users"></i>  45 - 59: <input type="range" min=0 max=100 value={{def_c4_vax}} class="slider" step="1" name="cat_4_vax" onchange="showValue(this)" /><span id="range">{{def_c4_vax}}%</span></div>
       <div class="w3-bar-item w3-padding"><i class="fa fa-users"></i>  60 - 69: <input type="range" min=0 max=100 value={{def_c5_vax}} class="slider" step="1" name="cat_5_vax" onchange="showValue(this)" /><span id="range">{{def_c5_vax}}%</span></div>
       <div class="w3-bar-item w3-padding"><i class="fa fa-users"></i>  > 70: <input type="range" min=0 max=100 value={{def_c6_vax}} class="slider" step="1" name="cat_6_vax" onchange="showValue(this)" /><span id="range">{{def_c6_vax}}%</span></div>
       <div class="w3-bar-item w3-padding"><input type="submit" value="Update Projections" onclick="w3_close()" title="close menu"></div>
       <div><a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black" onclick="w3_close()" title="close menu"><i class="fa fa-remove fa-fw"></i>  Close Menu</a></div>
  </form>
  </div>
  
</nav>


<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:300px;margin-top:43px;">

  <!-- Header -->
  <header class="w3-container" style="padding-top:22px">
    <h2><b>{{out_string}}</b></h2><br>
    <h5>Projections at R0 of {{r0}} without additional measures taken</h5>
  </header>

  <div class="w3-row-padding w3-margin-bottom">
    <div class="w3-quarter">
      <div class="w3-container w3-red w3-padding-16">
        <div class="w3-left"><i class="fa fa-refresh w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>{{no_cycles}}</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Replication Cycles</h4>
      </div>
    </div>
    <div class="w3-quarter">
      <div class="w3-container w3-blue w3-padding-16">
        <div class="w3-left"><i class="fa fa-share-alt w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>{{infected}}</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Infected</h4>
      </div>
    </div>
    <div class="w3-quarter">
      <div class="w3-container w3-teal w3-padding-16">
        <div class="w3-left"><i class="fa fa-hospital-o w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>{{icu}}</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Hospitalized/ICU</h4>
      </div>
    </div>
    <div class="w3-quarter">
      <div class="w3-container w3-orange w3-text-white w3-padding-16">
        <div class="w3-left"><i class="fa fa-calendar w3-xxxlarge"></i></div>
        <div class="w3-right">
          <h3>{{days}}</h3>
        </div>
        <div class="w3-clear"></div>
        <h4>Days till overrun</h4>
      </div>
    </div>
  </div>

  <div class="w3-panel">
    <div class="w3-row-padding" style="margin:0 -16px">
      <div class="w3-third">
        <h5>Assumptions Made For Projections:</h5>
        Click <i class="fa fa-wrench"></i> About to change them
        <ul>
            <li><b>R0: </b> {{r0}}</li>
            <li><b>Susceptible Proportion: </b> {{sus_pop}}</li>
            <li><b>Effective R0: </b> {{effective_r0}}</li>
            <li><b>Serial Interval: </b> {{si}}</li>
            <li><b><12 Vax Rate: </b> {{cat_1_vax}}%</li>
            <li><b>12 - 39 Vax Rate: </b> {{cat_2_vax}}%</li>
            <li><b>40 - 44 Vax Rate: </b> {{cat_3_vax}}%</li>
            <li><b>45 - 59 Vax Rate: </b> {{cat_4_vax}}%</li>
            <li><b>60 - 69 Vax Rate: </b> {{cat_5_vax}}%</li>
            <li><b>>70 Vax Rate: </b> {{cat_6_vax}}%</li>
          </ul> 
      </div>
      <div class="w3-twothird">
        <h5>Other Assumptions</h5>
        <table class="w3-table w3-striped w3-white">
            <tr>
                <th>Age Group</th>
                <th>% of Pop</th>
                <th>Hospital - No Vaxx </th>
                <th>Hospital - 2 doses</th>
              </tr>
              <tr>
                <td>Below 12</td>
                <td>14.5%</td>
                <td>2.35%</td>
                <td>0.83%</td>
              </tr>
              <tr>
                <td>12 to 39</td>
                <td>33.2%</td>
                <td>3.95%</td>
                <td>1.4%</td>
              </tr>      
              <tr>
                <td>40 to 44</td>
                <td>7.4%</td>
                <td>6.95%</td>
                <td>2.46%</td>
              </tr>
              <tr>
                <td>45 to 59</td>
                <td>22.6%</td>
                <td>9.75%</td>
                <td>3.46%</td>
              </tr>
              <tr>
                <td>60 to 69</td>
                <td>12.7%</td>
                <td>12.85%</td>
                <td>4.55%</td>
              </tr>
              <tr>
                <td>70 and older</td>
                <td>9.5%</td>
                <td>15.4%</td>
                <td>5.46%</td>
              </tr>
        </table>
        Note: Below 12 includes 10-14 year olds and 12 to 39 year olds start from 15 due to nature of the demographics data
      </div>
    </div>
  </div>
  <hr>
  <div class="w3-container">
    <h5>General Information About The Model, Data And Estimates</h5>
    <p><h6><strong>General Assumptions</strong></h6></p>
    <p>We made numerous simplifying assumptions such as assuming 1 dose has no effect on the likelihood of hospitalzation but based on these default and simplying assumptions, we predict our ICU capacity of 1000 to be overrun about 6 weeks which doesn't seem far off from 
    <a href="https://www.straitstimes.com/singapore/health/covid-19-icu-capacity-under-watch-as-ktv-cluster-grows-5-weeks-is-all-it-takes-to" target="_blank">recent comments from Brother OYK.</a></p> <p>We also made the assumption that the vaccine has a 60% chance of preventing an infection which we then used to calcualte an effective R0 based on the vaccination rate.  </p>
    <p><h6><strong>R0</strong></h6></p>
    <p>R0, pronounced “R naught,” is a mathematical term that indicates how contagious an infectious disease is. It’s also referred to as the reproduction number. As an infection is transmitted to new people, it reproduces itself. R0 tells you the average number of people who will contract a contagious disease from one person with that disease.
    <a href="https://www.healthline.com/health/r-nought-reproduction-number#meaning" target="_blank">(Link)</a> </p>  
    <p>It isn't a perfect measure but we will use it to get a sense of how many people will get infected assuming no measures to stem the spread (CB/Phase2HA). We use a default R0 of 6.0 based on the average of a <a href="https://www.reddit.com/r/singapore/comments/onvrsr/ho_ching_on_the_current_covid_delta_pandemic/" target="_blank">recent post from Ho Ching that suggests and R0 of 5-6, particularly for the delta variant.</a></p>
    <p><h6><strong>Serial Interval</strong></h6></p>
    <p>The serial interval, in the epidemiology of communicable (infectious) diseases, refers to the time between successive cases in a chain of transmission.
    <a href="https://en.wikipedia.org/wiki/Serial_interval" target="_blank">(Link)</a></p>
    <p>We use a default serial interval of 5.4 for COVID-19 based on a pooled estiamte from <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7448781/" target="_blank">this study</a></p>
    <p><h6><strong>Population Demographics</strong></h6></p>
    <p>For this version, we assume that the infection spread mimics the population demographics of Singapore based on 2020 data from SingStat
    <a href="https://www.singstat.gov.sg/find-data/search-by-theme/population/population-and-population-structure/latest-data" target="_blank">(Link)</a> </p>
    <p><h6><strong>Probability of Hospitalization</strong></h6></p>
    <p>We estiamte the probability of hospitalization from COVID by take the mean of the upper and lower bound for the age group from
    <a href="https://riskcalc.org/COVID19Hospitalization/" target="_blank">this calculator</a>. We assume Asian males and defaults for all the other parameters and assume a 64.55% reduction in risk of hospitalization/ICU based on
    <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7709178/" target="_blank">this study.</a></p>
  <hr></div>
  <div class="w3-container">
    <h5>Future Work</h5>
    <p><h6><strong>Model Enhancement</strong></h6></p>
    <ul>
        <li>Toggle demographics to change the way virus spread to account for more/less older people etc</li>
        <li>Build in the effect of 1 dose and the reduction in the likelihood of hospitalization</li>
        <li>Use published numbers to estimate a new R0 daily as the default</li>
        <li>Model patient discharge/run-off</li>
    </ul>
    <p><h6><strong>Model Enhancement</strong></h6></p>
    <ul>
        <li>Add charts</li>
    </ul>
  <hr></div>

  <!-- <div class="w3-container">
    <h5>Countries</h5>
    <table class="w3-table w3-striped w3-bordered w3-border w3-hoverable w3-white">
      <tr>
        <td>United States</td>
        <td>65%</td>
      </tr>
      <tr>
        <td>UK</td>
        <td>15.7%</td>
      </tr>
      <tr>
        <td>Russia</td>
        <td>5.6%</td>
      </tr>
      <tr>
        <td>Spain</td>
        <td>2.1%</td>
      </tr>
      <tr>
        <td>India</td>
        <td>1.9%</td>
      </tr>
      <tr>
        <td>France</td>
        <td>1.5%</td>
      </tr>
    </table><br>
    <button class="w3-button w3-dark-grey">More Countries  <i class="fa fa-arrow-right"></i></button>
  </div>
  <hr>
  <div class="w3-container">
    <h5>Recent Users</h5>
    <ul class="w3-ul w3-card-4 w3-white">
      <li class="w3-padding-16">
        <img src="/w3images/avatar2.png" class="w3-left w3-circle w3-margin-right" style="width:35px">
        <span class="w3-xlarge">Mike</span><br>
      </li>
      <li class="w3-padding-16">
        <img src="/w3images/avatar5.png" class="w3-left w3-circle w3-margin-right" style="width:35px">
        <span class="w3-xlarge">Jill</span><br>
      </li>
      <li class="w3-padding-16">
        <img src="/w3images/avatar6.png" class="w3-left w3-circle w3-margin-right" style="width:35px">
        <span class="w3-xlarge">Jane</span><br>
      </li>
    </ul>
  </div>
  <hr>

  <div class="w3-container">
    <h5>Recent Comments</h5>
    <div class="w3-row">
      <div class="w3-col m2 text-center">
        <img class="w3-circle" src="/w3images/avatar3.png" style="width:96px;height:96px">
      </div>
      <div class="w3-col m10 w3-container">
        <h4>John <span class="w3-opacity w3-medium">Sep 29, 2014, 9:12 PM</span></h4>
        <p>Keep up the GREAT work! I am cheering for you!! Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p><br>
      </div>
    </div>

    <div class="w3-row">
      <div class="w3-col m2 text-center">
        <img class="w3-circle" src="/w3images/avatar1.png" style="width:96px;height:96px">
      </div>
      <div class="w3-col m10 w3-container">
        <h4>Bo <span class="w3-opacity w3-medium">Sep 28, 2014, 10:15 PM</span></h4>
        <p>Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p><br>
      </div>
    </div>
  </div>
  <br>
  <div class="w3-container w3-dark-grey w3-padding-32">
    <div class="w3-row">
      <div class="w3-container w3-third">
        <h5 class="w3-bottombar w3-border-green">Demographic</h5>
        <p>Language</p>
        <p>Country</p>
        <p>City</p>
      </div>
      <div class="w3-container w3-third">
        <h5 class="w3-bottombar w3-border-red">System</h5>
        <p>Browser</p>
        <p>OS</p>
        <p>More</p>
      </div>
      <div class="w3-container w3-third">
        <h5 class="w3-bottombar w3-border-orange">Target</h5>
        <p>Users</p>
        <p>Active</p>
        <p>Geo</p>
        <p>Interests</p>
      </div>
    </div>
  </div> -->

  <!-- Footer -->
  <footer class="w3-container w3-padding-16 w3-light-grey">
    <h5>      Created by: <a href ="https://www.linkedin.com/in/stuart-ong/" target="_blank">Stuart Ong</a><br>
        For queries, colabs, feedback, suggestions, <a href = "mailto: ongstuart@gmail.com">drop me a mail</a></h5>
    <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
  </footer>

  <!-- End page content -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>


<script type="text/javascript">
// update slider values
function get_nextsibling(n)
   {
   x=n.nextSibling;
   while (x.nodeType!=1)
     {
     x=x.nextSibling;
     }
   return x;
   }
  function showValue(self)
  {
   get_nextsibling(self).innerHTML=self.value+"%";
  }
</script>

<script>
  // read more read less
  $(document).ready(function () {
    $(".content").hide();
    $(".show_hide").on("click", function () {
        var txt = $(".content").is(':visible') ? 'Read More' : 'Read Less';
        $(".show_hide").text(txt);
        $(this).next('.content').slideToggle(200);
    });
});
</script>
</body>
</html>